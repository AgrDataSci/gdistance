<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Geographic Correction — geoCorrection • gdistance</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Geographic Correction — geoCorrection"><meta property="og:description" content="Correct 'TransitionLayer' objects taking into account 
 local distances"><meta property="og:image" content="/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gdistance</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Overview.html">gdistance: Distances and Routes on Geographical Grids</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/AgrDataSci/gdistance/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Geographic Correction</h1>
    <small class="dont-index">Source: <a href="https://github.com/AgrDataSci/gdistance/blob/HEAD/R/geoCorrection.R" class="external-link"><code>R/geoCorrection.R</code></a></small>
    <div class="hidden name"><code>geoCorrection.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Correct 'TransitionLayer' objects taking into account 
 local distances</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">geoCorrection</span><span class="op">(</span><span class="va">x</span>, <span class="va">type</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>object of class <code>Transition*</code></p></dd>


<dt>type</dt>
<dd><p>type of correction: "c", "r", or missing 
(only required for lonlat, see Details)</p></dd>


<dt>...</dt>
<dd><p>additional arguments passed to methods. <code>multpl</code> with 
correction factor (<code>TRUE</code>) or corrected values (<code>FALSE</code>, the default).
<code>scl</code> scale the correction values (default is <code>FALSE</code>)</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>a 'Transition*' object</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Geographic correction is necessary for all objects of the 
 class Transition that are either: 
 (1) based on a grid in a geographic (lonlat) projection 
  and covering a large area; 
 (2) made with directions &gt; 4.</p>
<p>The function will correct for map distortion, as well as for diagonal 
 connections between grid cells (which cover a longer distance than vertical 
 or horizontal connections).</p>
<p>When working with lonlat grids, users should also anticipate whether they 
 will use methods based on either least-cost or random walks, and set the 
 type argument accordingly. In the case of least-cost distances, the 
 correction is only done in East-West direction. In the case of random walks 
 there should be an additional correction which reduces the conductance in
 North-South direction (<code>type="r"</code>).</p>
<p>The correction is done by dividing conductance values by the inter-cell 
 distance. Distances are calculated as great-circle distances for lonlat 
 grids (see function <code>[raster]{isLonLat}</code>) and Euclidean distances for all other grids.</p>
<p>In the case of randomised shortest paths, the need for correction is 
somewhat in between these two correction methods. We have not developed 
an analytical solution for this problem yet. With very low values for theta,
you may choose the correction for random walks, and for high values the one for 
least-cost paths. Users who want to work with intermediate values of theta are 
encouraged to experiment with different solutions.</p>
<p>The values are scaled to get values near 1 if the argument <code>scl</code> is set to 
 TRUE. This is desirable for subsequent calculations involving random walk
 calculations. Values are divided by the W-E inter-cell distance (at the 
 centre of the grid).</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Jacob van Etten</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://rspatial.org/raster" class="external-link">"raster"</a></span><span class="op">)</span></span>
<span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html" class="external-link">raster</a></span><span class="op">(</span>ncol<span class="op">=</span><span class="fl">36</span>,nrow<span class="op">=</span><span class="fl">18</span><span class="op">)</span></span>
<span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/setValues.html" class="external-link">setValues</a></span><span class="op">(</span><span class="va">r</span>,<span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>,times<span class="op">=</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/dimensions.html" class="external-link">ncell</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">tr</span> <span class="op">&lt;-</span> <span class="fu"><a href="transition.html">transition</a></span><span class="op">(</span><span class="va">r</span>, <span class="va">mean</span>, directions<span class="op">=</span><span class="fl">8</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># directly</span></span>
<span><span class="va">tr1</span> <span class="op">&lt;-</span> <span class="fu">geoCorrection</span><span class="op">(</span><span class="va">tr</span>, type<span class="op">=</span><span class="st">"c"</span>, multpl<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">tr1</span></span>
<span></span>
<span><span class="co"># the same, but with a separate correction matrix</span></span>
<span><span class="va">trCorr</span> <span class="op">&lt;-</span> <span class="fu">geoCorrection</span><span class="op">(</span><span class="va">tr</span>, type<span class="op">=</span><span class="st">"c"</span>, multpl<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">tr2</span> <span class="op">&lt;-</span> <span class="va">tr</span> <span class="op">*</span> <span class="va">trCorr</span></span>
<span><span class="va">tr2</span></span></code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jacob van Etten, Kauê de Sousa.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

